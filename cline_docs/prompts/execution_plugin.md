# 执行阶段插件

本插件提供了 CRCT 系统执行阶段的详细指导。在此阶段，系统将执行任务、修改代码和文件，并实施策略阶段制定的计划。

## 执行阶段概述

执行阶段是 CRCT 系统的实施阶段，负责：
1. 执行任务
2. 修改代码和文件
3. 实施策略阶段制定的计划
4. 记录执行结果

## 核心流程

### 1. 任务执行

1. **读取指令文件**：理解任务的目标、步骤和依赖关系。
2. **检查依赖关系**：确保所有依赖关系都已满足。
3. **执行步骤**：按照指令文件中的步骤执行任务。
4. **记录结果**：记录执行结果和遇到的问题。

### 2. 代码和文件修改

1. **预操作验证**：在进行更改之前验证文件系统状态。
2. **增量执行**：逐步执行，记录结果。
3. **错误处理**：记录并解决命令失败。
4. **依赖跟踪**：根据需要更新跟踪器。

### 3. 命令执行指南

1. **预操作验证**：在进行更改之前验证文件系统状态。
2. **增量执行**：逐步执行，记录结果。
3. **错误处理**：记录并解决命令失败。
4. **依赖跟踪**：根据需要更新跟踪器。
5. **MUP**：执行后遵循核心和插件特定的 MUP 步骤。

### 4. 递归任务分解

如果在执行过程中发现需要进一步分解的子任务：
1. **创建新指令**：为子任务创建新的指令文件。
2. **递归处理**：递归处理新任务。
3. **整合输出**：整合子任务的输出。

### 5. 强制更新协议 (MUP)

每次状态更改操作后，必须立即执行 MUP：
1. **更新 `activeContext.md`**：总结操作、影响和新状态。
2. **更新 `changelog.md`**：记录重大更改，包括日期、描述、原因和受影响的文件。
3. **更新 `.clinerules`**：添加到 `[LEARNING_JOURNAL]` 并更新 `[LAST_ACTION_STATE]`。
4. **验证**：确保更新之间的一致性。
5. **更新相关 HDTA 文件**：根据需要更新系统清单、模块文件、实施计划或任务指令，以反映更改。

## 任务关闭和整合

1. **验证完成**：确保所有任务步骤都已完成。
2. **更新状态**：更新任务状态为已完成。
3. **整合输出**：整合任务输出，确保与整体项目一致。
4. **更新依赖跟踪器**：更新依赖跟踪器以反映新的依赖关系。
5. **MUP**：执行强制更新协议。

## 强制定期文档更新

LLM 必须每 5 次交互执行一次完整的强制更新协议 (MUP)，无论任务完成状态如何。这种定期更新要求确保：
1. 定期记录进度
2. 保持状态一致性
3. 清理已完成的任务
4. 防止上下文漂移

## 故障排除

- **执行问题**：确保所有依赖关系都已满足，并且指令文件中的步骤清晰明确。
- **代码修改问题**：使用预操作验证确保文件系统状态正确，并使用增量执行逐步进行更改。
- **命令失败**：记录错误消息，分析原因，并尝试解决问题。
- **依赖关系问题**：使用 `show-dependencies` 命令检查依赖关系，确保所有依赖关系都已正确识别和记录。